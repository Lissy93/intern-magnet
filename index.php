<?php$pn = 1;if(session_id() == '') { session_start(); }include_once $_SERVER['DOCUMENT_ROOT']."/php/Db.class.php";         // Database Classinclude_once $_SERVER['DOCUMENT_ROOT']."/php/UserActions.class.php";// User Actions Class$ua = new UserActions();$loggedIn = $ua->isLoggedIn();if($loggedIn){    $userObj = $ua->makeUserObject();    if(!$userObj){$loggedIn = false;}}$searchObj = new Search();$skillsObj = new Skills();$magnetObj = new Magnet();/* Top Students and Employers */$limit = 4;$topStudents  = $magnetObj->getTopStudents();$topEmployers = $magnetObj->getTopEmployers();/* New Users */$newUsers = $searchObj->getNewUsers();if($loggedIn){    /* Skills */    $usersSkills = $skillsObj->getUsersSkills($userObj->getUserId());    $userHasSkills = false;    if(count($usersSkills)>1){        $userHasSkills = true;    }    else if(count($usersSkills>0)){        if(count($usersSkills)==1){            if($usersSkills[0]!="" && $usersSkills[0]!=null  && $usersSkills[0]!=" "){                $userHasSkills = true;            }            else{                $userHasSkills = true;            }        }    }    /* Profile Completness */    $profileCompleteness =  $userObj->calculateProfileCompleteness();    $tips = $userObj->getProfileImprovementTips();    if($profileCompleteness<=20){ $c = "danger";        $m = "Urgent Attention Needed"; }    else if($profileCompleteness<=40){ $c = "warning";  $m = "Attention Needed"; }    else if($profileCompleteness<=70){ $c = "info";     $m = "Getting there";}    else if($profileCompleteness>70) { $c = "success";  $m = "Your profiles looking great!";}    /* Magnet Requets */    $magRequestsSent     = count($magnetObj->getOutwardConnections($userObj->getUserId()));    $magRequestsReceived = count($magnetObj->getInwardConnections($userObj->getUserId()));    $magMatches          = count($magnetObj->getTwoWayConnections($userObj->getUserId()));}?><!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <meta charset="utf-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <meta name="viewport" content="width=device-width, initial-scale=1">    <meta name="description" content="">    <meta name="author" content="Alicia Sykes">    <link rel="shortcut icon" href="img/favicon.ico">    <title>Intern Magnet</title>    <!-- Bootstrap -->    <link href="css/bootstrap.min.css" rel="stylesheet">    <!-- Fonts -->    <link href='http://fonts.googleapis.com/css?family=Raleway:400,700' rel='stylesheet' type='text/css'>    <!-- Custom styles for template -->    <link href="css/styles.css" rel="stylesheet">    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->    <!--[if lt IE 9]>    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>    <![endif]--></head><body><div class="container main ">    <?php require($_SERVER['DOCUMENT_ROOT'] . "/html/navbar.php"); ?>        <div class="row" style="width:95%; margin: 0 auto;">            <?php if($loggedIn && $profileCompleteness<81){?>                <div class="alert alert-<?php echo $c; ?>" role="alert" onclick="location.href='/settings.php#awsome-profile'" id="profile-completeness-notice">                    <?php echo $m." - Profile is <b>".$profileCompleteness; ?>% complete</b>. <?php if(count($tips)>0){ ?>Click <a href="/settings.php#awsome-profile">here</a> to see <b>(<?php echo count($tips);?>)</b> tips for improvement<?php } ?>                </div>            <?php } ?>        </div>    <!-- Carousel   ================================================== -->    <div id="myCarousel" class="carousel slide" data-ride="carousel">        <!-- Indicators -->        <ol class="carousel-indicators">            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>            <li data-target="#myCarousel" data-slide-to="1"></li>            <li data-target="#myCarousel" data-slide-to="2"></li>            <li data-target="#myCarousel" data-slide-to="3"></li>        </ol>        <div class="carousel-inner" role="listbox">            <div class="item active">                <img src="/img/banner_txt4.jpg" alt="Intern Magnet">                <div class="container">                    <div class="carousel-caption">                    </div>                </div>            </div>            <div class="item">                <img src="/img/banner_txt1.jpg" alt="About IM">                <div class="container">                    <div class="carousel-caption">                        <h1>About Intern Magnet.</h1>                        <p>Intern Magnet was set up to help interns find employers and employers find interns. It's easy to use and free</p>                        <p><a class="btn btn-lg btn-primary" href="/about.php" role="button">Learn more</a></p>                    </div>                </div>            </div>            <div class="item">                <img src="/img/banner_txt2.jpg" alt="Sign Up">                <div class="container">                    <div class="carousel-caption">                        <h1>Sign Up Now!</h1>                        <p>To find an internship or an employer, just sign up - it's free!</p>                        <p><a class="btn btn-lg btn-primary" href="/login.php" role="button">Sign Up</a></p>                    </div>                </div>            </div>            <div class="item">                <img src="/img/banner_txt3.jpg" alt="Search Interns">                <div class="container">                    <div class="carousel-caption">                        <h1>See who's already on IM</h1>                        <p>You can search IM members using the search page</p>                        <p><a class="btn btn-lg btn-primary" href="/search.php" role="button">Search</a></p>                    </div>                </div>            </div>        </div>        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>            <span class="sr-only">Previous</span>        </a>        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>            <span class="sr-only">Next</span>        </a>    </div><!-- /.carousel -->    <div class="container">        <?php if(!$loggedIn){ ?>            <div class="row top-buffer">                <div class="col-md-6">                    <h2>About Intern Magnet</h2>                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco                    </p>                    <a class="grey-button pull-right" href="/about.php">Read More <span class="glyphicon glyphicon-chevron-right"></span></a>                </div>                <div class="col-md-6">                    <h2>Get Started</h2>                    <p>If you are a student looking for an internship or an employer looking for either an intern or a                        part-time or temp employee, all you need to do is sign up, and within minutes you'll have access                        to plenty of student/ employer profiles.                    </p>                    <a class="grey-button pull-right" href="/login.php">Sign Up <span class="glyphicon glyphicon-chevron-right"></span></a>                </div>            </div>            <div class="row top-buffer"></div>        <?php } ?>        <div class="row top-buffer">            <div class="col-md-4">                <div class="panel panel-default">                    <div class="panel-heading"><h3>Top Employers</h3><i class="fa fa-link fa-1x"></i></div>                    <div class="panel-inner">                        <?php                        if(count($topEmployers)>$limit){$l = $limit; }                        else{$l = count($topEmployers);}                        for($i = 0; $i<$l; $i++){ ?>                            <div class="list-group-item text-right mb-height">                                <a href="/profile.php?userId=<?php echo $topEmployers[$i]->getUserId();?>">                                    <span class="pull-left"><img class="block-pic2" src="<?php echo $topEmployers[$i]->getGravatar(50); ?>" /></span>                                    <span class="pull-left"><strong><?php echo $topEmployers[$i]->getFullName(); ?> </strong></span>                                </a>                                -                            </div>                        <?php } ?>                    </div>                </div>            </div>            <div class="col-md-4">                <div class="panel panel-default">                    <div class="panel-heading"><h3>Top Students</h3><i class="fa fa-link fa-1x"></i></div>                    <div class="panel-inner">                        <?php                        if(count($topStudents)>$limit){$l = $limit; }                        else{$l = count($topStudents);}                        for($i = 0; $i<$l; $i++){ ?>                            <div class="list-group-item text-right mb-height">                                <a href="/profile.php?userId=<?php echo $topStudents[$i]->getUserId();?>">                                    <span class="pull-left"><img class="block-pic2" src="<?php echo $topStudents[$i]->getGravatar(50); ?>" /></span>                                    <span class="pull-left"><strong><?php echo $topStudents[$i]->getFullName(); ?> </strong></span>                                </a>                                -                            </div>                        <?php } ?>                    </div>                </div>            </div>            <div class="col-md-4">                <div class="panel panel-default">                    <div class="panel-heading"><h3>New Users</h3><i class="fa fa-link fa-1x"></i></div>                    <div class="panel-inner">                        <?php                        if(count($newUsers)>$limit){$l = $limit; }                        else{$l = count($newUsers);}                        for($i = 0; $i<$l; $i++){ ?>                            <div class="list-group-item text-right mb-height">                                <a href="/profile.php?userId=<?php echo $newUsers[$i]->getUserId();?>">                                    <span class="pull-left"><img class="block-pic2" src="<?php echo $newUsers[$i]->getGravatar(50); ?>" /></span>                                    <span class="pull-left"><strong><?php echo $newUsers[$i]->getFullName(); ?> </strong></span>                                </a>                                -                            </div>                        <?php } ?>                    </div>                </div>            </div>        </div>        <?php if($loggedIn){ ?>            <div class="row top-buffer">                <div class="col-md-6">                    <div class="panel panel-default">                        <div class="panel-heading"><h3>Suggested Users to Connect with</h3><i class="fa fa-link fa-1x"></i></div>                        <div class="panel-inner">                            <p><b>This feature is coming very soon!</b></p>                            <p>Here users you may be interested on connecting with will be shown.</p>                            <p>The list will be compiled based on the skills you have, location availibleility etc...</p>                        </div>                    </div>                </div>                <div class="col-md-6">                    <div class="panel panel-default">                        <div class="panel-heading"><h3>Search</h3><i class="fa fa-link fa-1x"></i></div>                        <div class="panel-inner">                            <form action="/search.php" method="get">                                <input type="text" name="s" class="as-input" style="width: 340px;"                                       placeholder="Search by skills, location, university etc.." />                                <input type="submit" value="Search" class="search-button"/>                                <br />                                <a href="/search.php" class="small-grey">Click here for advanced search options</a>                            </form>                            <br />                        </div>                    </div>                </div>            </div>            <div class="row top-buffer">                <div class="col-md-6"  onClick="location.href='/settings.php#awsome-profile'" style="cursor: pointer;">                    <div class="panel panel-default">                        <div class="panel-heading"><h3>Profile Completeness</h3><i class="fa fa-link fa-1x"></i></div>                        <div class="panel-inner" id="awsome-profile">                            <?php                            $profileCompleteness =  $userObj->calculateProfileCompleteness();                            $tips = $userObj->getProfileImprovementTips();                            if($profileCompleteness<=20){ $c = "danger";        $m = "Urgent Attention Needed"; }                            else if($profileCompleteness<=40){ $c = "warning";  $m = "Attention Needed"; }                            else if($profileCompleteness<=70){ $c = "info";     $m = "Getting there";}                            else if($profileCompleteness>70) { $c = "success";  $m = "Your profiles looking great!";}                            ?>                            <div class="alert alert-<?php echo $c; ?>" role="alert">                                <?php echo $m." - profile is ".$profileCompleteness; ?>% complete</p>                            </div>                            <?php if(count($tips)>0){ ?>                                <p><b>Tips for improving profile completeness:</b></p>                                <ol>                                    <?php for($i = 0; $i < count($tips); $i++){ ?>                                        <li><?php echo $tips[$i]; ?></li>                                    <?php } ?>                                </ol>                            <?php } ?>                            <br />                            <div class="progress" style="height: 40px;">                                <div class="progress-bar progress-bar-<?php echo $c; ?> progress-bar-striped" role="progressbar"                                     aria-valuenow="<?php echo $profileCompleteness; ?>" aria-valuemin="0" aria-valuemax="100"                                     style="width: <?php echo $profileCompleteness; ?>%">                                    <span><?php echo $profileCompleteness; ?>% Complete</span>                                </div>                            </div>                        </div>                    </div>                </div>                <div class="col-md-6"   onClick="location.href='/magnet-board.php'" style="cursor: pointer;">                    <div class="panel panel-default">                        <div class="panel-heading"><h3>Magnetising</h3><i class="fa fa-link fa-1x"></i></div>                        <div class="panel-inner">                            <p>You have sent <b><?php echo $magRequestsSent;?></b> magnet requests in the past 30 days</p>                            <p>You have received <b><?php echo $magRequestsReceived;?></b> magnet requests in the past 30 days</p>                            <p>You have <b><?php echo $magMatches;?></b> magnet matches from the past 30 days</p>                            <a class="grey-button pull-right" href="/magnet-board.php" style="width: 100%;">View all Magnet Requests <span class="glyphicon glyphicon-chevron-right"></span></a>                            <br /><br /><br />                        </div>                    </div>                </div>            </div>        <?php } ?>        <div class="row top-buffer"></div>    </div>    </div><?php require($_SERVER['DOCUMENT_ROOT'] . "/html/footer.php"); ?><!-- jQuery (necessary for Bootstrap's JavaScript plugins) --><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><!-- Include all compiled plugins (below), or include individual files as needed --><script src="js/bootstrap.min.js"></script><script src="/js/notification-script.js"></script></body></html>